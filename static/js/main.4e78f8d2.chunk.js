(this["webpackJsonpauth-and-graph"]=this["webpackJsonpauth-and-graph"]||[]).push([[0],{110:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(2),c=n.n(r),s=n(35),u=n.n(s),l=(n(110),n(9)),o=n(23),i=n(7),j=n(30),d=n(46);function b(e){var t=e.children,n=e.className,r=Object(d.a)(e,["children","className"]),c="btn btn-primary ".concat(n," ");return Object(a.jsx)("button",Object(j.a)(Object(j.a)({className:c},r),{},{children:t}))}function h(e){var t=e.log,n=e.logOut;return t?Object(a.jsx)(b,{className:"d-block m-2",onClick:n,children:"\u0412\u044b\u0439\u0442\u0438"}):Object(a.jsx)(o.b,{to:"/auth",className:"btn btn-primary d-block m-2",children:"\u0412\u043e\u0439\u0442\u0438"})}function m(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.b,{className:"btn btn-primary m-2",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(a.jsx)(o.b,{className:"btn btn-primary m-2",to:"/graph",children:"\u0413\u0440\u0430\u0444\u0438\u043a"})]})}function O(e){var t=e.children;return Object(a.jsx)("nav",{className:"nav",children:t})}n(115);function f(e){var t=e.children;return Object(a.jsx)("header",{className:"d-flex justify-content-between align-items-center line",children:t})}function x(e){var t=e.log,n=e.logOut;return Object(a.jsxs)(f,{children:[Object(a.jsx)(O,{children:Object(a.jsx)(m,{})}),Object(a.jsx)(h,{log:t,logOut:n})]})}function p(){return Object(a.jsx)("h3",{className:"text-center",children:"Loading..."})}function g(e){var t=e.name;return Object(a.jsxs)("h2",{className:"text-center pt-2",children:["\u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c, ",t]})}var v=n(122),y=n(36),N=n(75),D=n.n(N);n(116),n(117);function w(e){var t=e.loading,n=e.checkDateForChangeURL,r=e.endDateHandler,c=e.startDateHandler,s=e.startDate,u=e.endDate;return Object(a.jsxs)("div",{className:"w-100 d-flex align-items-center",children:[Object(a.jsx)(D.a,{className:"form-control m-1",selected:s,onChange:function(e){return c(e)},selectsStart:!0,startDate:s,endDate:u,minDate:new Date(2010,10,10),maxDate:Object(v.default)(new Date,1),placeholderText:"\u041e\u0442",dateFormat:"dd/MM/yyyy",disabled:t}),Object(a.jsx)(D.a,{className:"form-control ml-3 ",selected:u,onChange:function(e){return r(e)},selectsEnd:!0,startDate:s,endDate:u,minDate:s,maxDate:Object(y.default)(s,15),placeholderText:"\u0414\u043e",dateFormat:"dd/MM/yyyy",disabled:t}),Object(a.jsx)(b,{onClick:function(){return n()},className:"ml-5",disabled:!(s&&u)||t,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})]})}function S(){return Object(a.jsx)("h2",{className:"text-center",children:"\u0414\u0430\u043d\u043d\u044b\u0445 \u0437\u0430 \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})}function U(){return Object(a.jsx)("h2",{className:"text-center",children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u043d\u043e\u0432\u0430"})}function R(e){return e.error?Object(a.jsx)(U,{}):Object(a.jsx)(S,{})}function k(e){var t=e.value;return Object(a.jsx)("option",{value:t,children:t})}function F(e){var t=e.valutes,n=Object(d.a)(e,["valutes"]);return Object(a.jsx)("select",Object(j.a)(Object(j.a)({},n),{},{children:t.map((function(e){return Object(a.jsx)(k,{value:e},e)}))}))}var C=n(103);n(273);function M(e){var t=e.data;return Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsx)(C.Line,{data:t})})}function E(e){var t=e.dataUSD,n=e.dataEUR,r=e.err,c=e.data,s=e.valuteArray,u=e.valuteHandler,l=e.valute;return 0===t.length||0===n.length||r?Object(a.jsx)(R,{error:r}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F,{value:l,onChange:u,className:"custom-select",valutes:s}),Object(a.jsx)(M,{data:c})]})}n(274);function L(e){var t=e.userName,n=void 0===t?"\u0432\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c":t,c=Object(r.useState)([]),s=Object(l.a)(c,2),u=s[0],o=s[1],i=Object(r.useState)([]),j=Object(l.a)(i,2),d=j[0],b=j[1],h=Object(r.useState)("USD/RUB"),m=Object(l.a)(h,2),O=m[0],f=m[1],x=Object(r.useState)(new Date(2020,2,2)),v=Object(l.a)(x,2),y=v[0],N=v[1],D=Object(r.useState)(new Date(2020,2,14)),S=Object(l.a)(D,2),U=S[0],R=S[1],k=Object(r.useState)(!0),F=Object(l.a)(k,2),C=F[0],M=F[1],L=Object(r.useState)(!1),H=Object(l.a)(L,2),B=H[0],T=H[1],_=Object(r.useState)("https://cors-anywhere.herokuapp.com/http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=02/03/2020&date_req2=14/03/2020&VAL_NM_RQ="),A=Object(l.a)(_,2),q=A[0],I=A[1],J=Object(r.useState)(!0),P=Object(l.a)(J,2),V=P[0],Q=P[1],X=function(e,t){return fetch(e).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"application/xml")})).then((function(e){return e.getElementsByTagName("Record")})).then((function(e){for(var t=[],n=0;n<e.length;n++)t.push({date:e[n].getAttribute("Date"),value:e[n].getElementsByTagName("Value")[0].innerHTML.replace(",","."),nominal:e[n].getElementsByTagName("Nominal")[0].innerHTML});return t})).then((function(e){return t(e)})).catch((function(e){console.log(e),T(!0)}))};Object(r.useEffect)((function(){T(!1),Q(!0),o([]),b([]),f("USD/RUB"),Promise.all([X("".concat(q,"R01235"),o),X("".concat(q,"R01239"),b)]).finally((function(){return Q(!1)}))}),[q]),Object(r.useEffect)((function(){z()}),[C]);var G=function(e){var t={};switch(e){case"USD/RUB":t={date:u.map((function(e){return e.date})),value:u.map((function(e){return e.value}))};break;case"EUR/RUB":t={date:d.map((function(e){return e.date})),value:d.map((function(e){return e.value}))};break;case"EUR/USD":t={date:u.map((function(e){return e.date})),value:d.map((function(e,t){return(e.value/u[t].value).toFixed(4)}))};break;default:t={date:u.map((function(e){return e.date})),value:u.map((function(e){return e.value}))}}return t},Y=function(e){return{year:e.getFullYear(),month:e.getMonth()>=9?e.getMonth()+1:"0"+(e.getMonth()+1),day:e.getDate()>=10?e.getDate():"0"+e.getDate()}},z=function(){var e=Y(y),t=Y(U);I("https://cors-anywhere.herokuapp.com/http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=".concat(e.day,"/").concat(e.month,"/").concat(e.year,"&date_req2=").concat(t.day,"/").concat(t.month,"/").concat(t.year,"&VAL_NM_RQ="))},K={labels:G(O).date,datasets:[{label:O,data:G(O).value,fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"}]};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g,{name:n}),Object(a.jsx)(w,{loading:V,checkDateForChangeURL:z,endDateHandler:function(e){R(e),e&&M(!C)},startDateHandler:function(e){N(e),R(null)},startDate:y,endDate:U}),V?Object(a.jsx)(p,{}):Object(a.jsx)(E,{dataUSD:u,dataEUR:d,err:B,data:K,valuteArray:["USD/RUB","EUR/RUB","EUR/USD"],valuteHandler:function(e){f(e.target.value)},valute:O})]})}function H(e){var t=e.value,n=e.placeholder,r=e.id,c=e.handler,s=e.type,u=void 0===s?"text":s;return Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:r,children:n}),Object(a.jsx)("input",{type:u,className:"form-control",id:r,placeholder:n,value:t,onChange:function(e){return c(e)}})]})}function B(){return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:Object(a.jsx)("p",{className:"text-center mb-0",children:"\u0418\u043c\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430"})})}n(275);function T(e){var t=e.children;return Object(a.jsx)("div",{className:"login",children:t})}var _=n(104);function A(){var e=localStorage.getItem("user");return e?JSON.parse(e):[]}function q(e,t){var n=function(){var e=A();return[].concat(Object(_.a)(e),[{name:"Alex",password:"1234"},{name:"Dmitriy",password:"qwerty"},{name:"admin",password:"password"}])}().filter((function(t){return t.name===e}));return n.length>0&&!!n.find((function(e){return e.password===t}))}function I(e){var t=e.logHandler,n=e.nameHandler,c=Object(r.useState)(""),s=Object(l.a)(c,2),u=s[0],o=s[1],i=Object(r.useState)(""),j=Object(l.a)(i,2),d=j[0],h=j[1],m=Object(r.useState)(!1),O=Object(l.a)(m,2),f=O[0],x=O[1],p=function(e,t){!function(e,t){var n=A();n.push({name:e,password:t}),localStorage.setItem("user",JSON.stringify(n))}(e,t),y(),g()};Object(r.useEffect)((function(){var e;return f&&(e=setTimeout((function(){return x(!1)}),3500)),function(){return clearTimeout(e)}}),[f]);var g=function(){o(""),h("")},v=function(){return!(u.length>0&&d.length>0)},y=function(){q(u,d)?(t(),n(u),g()):x(!0)};return Object(a.jsxs)(a.Fragment,{children:[f?Object(a.jsx)(B,{}):"",Object(a.jsxs)(T,{children:[Object(a.jsx)(H,{value:u,placeholder:"\u0418\u043c\u044f",id:"nameLabel",handler:function(e){o(e.target.value)}}),Object(a.jsx)(H,{type:"password",value:d,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"passLabel",handler:function(e){h(e.target.value)}}),Object(a.jsx)(b,{type:"submit",className:"w-100 mb-2",onClick:y,disabled:v(),children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsx)(b,{type:"submit",className:"w-100",onClick:function(){return p(u,d)},disabled:v(),children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}function J(){return Object(a.jsx)("h2",{className:"text-center pt-2 m-2",children:"\u041f\u0440\u0438\u0432\u0435\u0442! \u043d\u0430 \u044d\u0442\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0442\u044b \u0441\u043c\u043e\u0436\u0435\u0448\u044c \u043f\u0440\u043e\u0439\u0442\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a \u0432\u0430\u043b\u044e\u0442 \u0437\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"})}var P=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(),u=Object(l.a)(s,2),j=u[0],d=u[1],b=function(){c((function(e){return!e})),d()};return Object(a.jsxs)(o.a,{basename:"/react-authAndGraph",children:[Object(a.jsx)(x,{logOut:b,log:n}),Object(a.jsxs)(i.d,{children:[n?Object(a.jsx)(i.a,{from:"/auth",to:"/graph"}):"",Object(a.jsx)(i.b,{exact:!0,path:"/",children:Object(a.jsx)(J,{name:j})}),Object(a.jsx)(i.b,{path:"/graph",children:Object(a.jsx)(L,{userName:j})}),Object(a.jsx)(i.b,{path:"/auth",children:Object(a.jsx)(I,{log:n,logHandler:b,nameHandler:function(e){d(e)},userName:j})})]})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};u.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(P,{})}),document.getElementById("root")),V()}},[[276,1,2]]]);
//# sourceMappingURL=main.4e78f8d2.chunk.js.map